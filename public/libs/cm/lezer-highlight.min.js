this.Lezer=this.Lezer||{},this.Lezer.highlight=function(e){"use strict";let t=0;class r{constructor(e={}){this.id=t++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=i.match(e)),t=>{let r=e(t);return void 0===r?null:[this,r]}}}r.closedBy=new r({deserialize:e=>e.split(" ")}),r.openedBy=new r({deserialize:e=>e.split(" ")}),r.group=new r({deserialize:e=>e.split(" ")}),r.isolate=new r({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),r.contextHash=new r({perNode:!0}),r.lookAhead=new r({perNode:!0}),r.mounted=new r({perNode:!0});const a=Object.create(null);class i{constructor(e,t,r,a=0){this.name=e,this.props=t,this.id=r,this.flags=a}static define(e){let t=e.props&&e.props.length?Object.create(null):a,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),n=new i(e.name||"",t,e.id,r);if(e.props)for(let r of e.props)if(Array.isArray(r)||(r=r(n)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}return n}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(r.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let a of r.split(" "))t[a]=e[r];return e=>{for(let a=e.prop(r.group),i=-1;i<(a?a.length:0);i++){let r=t[i<0?e.name:a[i]];if(r)return r}}}}var n;i.none=new i("",Object.create(null),0,8),function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(n||(n={})),new r({perNode:!0});let o=0;class s{constructor(e,t,r,a){this.name=e,this.set=t,this.base=r,this.modified=a,this.id=o++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r="string"==typeof e?e:"?";if(e instanceof s&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let a=new s(r,[],null,[]);if(a.set.push(a),t)for(let e of t.set)a.set.push(e);return a}static defineModifier(e){let t=new h(e);return e=>e.modified.indexOf(t)>-1?e:h.get(e.base||e,e.modified.concat(t).sort(((e,t)=>e.id-t.id)))}}let l=0;class h{constructor(e){this.name=e,this.instances=[],this.id=l++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find((r=>{return r.base==e&&(a=t,i=r.modified,a.length==i.length&&a.every(((e,t)=>e==i[t])));var a,i}));if(r)return r;let a=[],i=new s(e.name,a,e,t);for(let e of t)e.instances.push(i);let n=function(e){let t=[[]];for(let r=0;r<e.length;r++)for(let a=0,i=t.length;a<i;a++)t.push(t[a].concat(e[r]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let t of e.set)if(!t.modified.length)for(let e of n)a.push(h.get(t,e));return i}}const c=new r;class g{constructor(e,t,r,a){this.tags=e,this.mode=t,this.context=r,this.next=a}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function d(e,t){let r=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)r[e.id]=t.class;else r[t.tag.id]=t.class;let{scope:a,all:i=null}=t||{};return{style:e=>{let t=i;for(let a of e)for(let e of a.set){let a=r[e.id];if(a){t=t?t+" "+a:a;break}}return t},scope:a}}function f(e,t,r,a=0,i=e.length){let n=new p(a,Array.isArray(t)?t:[t],r);n.highlightRange(e.cursor(),a,i,"",n.highlighters),n.flush(i)}g.empty=new g([],2,null);class p{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,a,i,n){let{type:o,from:s,to:l}=e;if(s>=a||l<=t)return;o.isTop&&(n=this.highlighters.filter((e=>!e.scope||e.scope(o))));let h=i,c=u(e)||g.empty,d=function(e,t){let r=null;for(let a of e){let e=a.style(t);e&&(r=r?r+" "+e:e)}return r}(n,c.tags);if(d&&(h&&(h+=" "),h+=d,1==c.mode&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(t,s),h),c.opaque)return;let f=e.tree&&e.tree.prop(r.mounted);if(f&&f.overlay){let r=e.node.enter(f.overlay[0].from+s,1),o=this.highlighters.filter((e=>!e.scope||e.scope(f.tree.type))),c=e.firstChild();for(let g=0,d=s;;g++){let p=g<f.overlay.length?f.overlay[g]:null,u=p?p.from+s:l,m=Math.max(t,d),k=Math.min(a,u);if(m<k&&c)for(;e.from<k&&(this.highlightRange(e,m,k,i,n),this.startSpan(Math.min(k,e.to),h),!(e.to>=u)&&e.nextSibling()););if(!p||u>a)break;d=p.to+s,d>t&&(this.highlightRange(r.cursor(),Math.max(t,p.from+s),Math.min(a,d),"",o),this.startSpan(Math.min(a,d),h))}c&&e.parent()}else if(e.firstChild()){f&&(i="");do{if(!(e.to<=t)){if(e.from>=a)break;this.highlightRange(e,t,a,i,n),this.startSpan(Math.min(a,e.to),h)}}while(e.nextSibling());e.parent()}}}function u(e){let t=e.type.prop(c);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}const m=s.define,k=m(),y=m(),b=m(y),w=m(y),N=m(),v=m(N),x=m(N),O=m(),M=m(O),S=m(),A=m(),E=m(),I=m(E),R=m(),z={comment:k,lineComment:m(k),blockComment:m(k),docComment:m(k),name:y,variableName:m(y),typeName:b,tagName:m(b),propertyName:w,attributeName:m(w),className:m(y),labelName:m(y),namespace:m(y),macroName:m(y),literal:N,string:v,docString:m(v),character:m(v),attributeValue:m(v),number:x,integer:m(x),float:m(x),bool:m(N),regexp:m(N),escape:m(N),color:m(N),url:m(N),keyword:S,self:m(S),null:m(S),atom:m(S),unit:m(S),modifier:m(S),operatorKeyword:m(S),controlKeyword:m(S),definitionKeyword:m(S),moduleKeyword:m(S),operator:A,derefOperator:m(A),arithmeticOperator:m(A),logicOperator:m(A),bitwiseOperator:m(A),compareOperator:m(A),updateOperator:m(A),definitionOperator:m(A),typeOperator:m(A),controlOperator:m(A),punctuation:E,separator:m(E),bracket:I,angleBracket:m(I),squareBracket:m(I),paren:m(I),brace:m(I),content:O,heading:M,heading1:m(M),heading2:m(M),heading3:m(M),heading4:m(M),heading5:m(M),heading6:m(M),contentSeparator:m(O),list:m(O),quote:m(O),emphasis:m(O),strong:m(O),link:m(O),monospace:m(O),strikethrough:m(O),inserted:m(),deleted:m(),changed:m(),invalid:m(),meta:R,documentMeta:m(R),annotation:m(R),processingInstruction:m(R),definition:s.defineModifier("definition"),constant:s.defineModifier("constant"),function:s.defineModifier("function"),standard:s.defineModifier("standard"),local:s.defineModifier("local"),special:s.defineModifier("special")};for(let e in z){let t=z[e];t instanceof s&&(t.name=e)}const C=d([{tag:z.link,class:"tok-link"},{tag:z.heading,class:"tok-heading"},{tag:z.emphasis,class:"tok-emphasis"},{tag:z.strong,class:"tok-strong"},{tag:z.keyword,class:"tok-keyword"},{tag:z.atom,class:"tok-atom"},{tag:z.bool,class:"tok-bool"},{tag:z.url,class:"tok-url"},{tag:z.labelName,class:"tok-labelName"},{tag:z.inserted,class:"tok-inserted"},{tag:z.deleted,class:"tok-deleted"},{tag:z.literal,class:"tok-literal"},{tag:z.string,class:"tok-string"},{tag:z.number,class:"tok-number"},{tag:[z.regexp,z.escape,z.special(z.string)],class:"tok-string2"},{tag:z.variableName,class:"tok-variableName"},{tag:z.local(z.variableName),class:"tok-variableName tok-local"},{tag:z.definition(z.variableName),class:"tok-variableName tok-definition"},{tag:z.special(z.variableName),class:"tok-variableName2"},{tag:z.definition(z.propertyName),class:"tok-propertyName tok-definition"},{tag:z.typeName,class:"tok-typeName"},{tag:z.namespace,class:"tok-namespace"},{tag:z.className,class:"tok-className"},{tag:z.macroName,class:"tok-macroName"},{tag:z.propertyName,class:"tok-propertyName"},{tag:z.operator,class:"tok-operator"},{tag:z.comment,class:"tok-comment"},{tag:z.meta,class:"tok-meta"},{tag:z.invalid,class:"tok-invalid"},{tag:z.punctuation,class:"tok-punctuation"}]);return e.Tag=s,e.classHighlighter=C,e.getStyleTags=u,e.highlightCode=function(e,t,r,a,i,n=0,o=e.length){let s=n;function l(t,r){if(!(t<=s)){for(let n=e.slice(s,t),o=0;;){let e=n.indexOf("\n",o),t=e<0?n.length:e;if(t>o&&a(n.slice(o,t),r),e<0)break;i(),o=e+1}s=t}}f(t,r,((e,t,r)=>{l(e,""),l(t,r)}),n,o),l(o,"")},e.highlightTree=f,e.styleTags=function(e){let t=Object.create(null);for(let r in e){let a=e[r];Array.isArray(a)||(a=[a]);for(let e of r.split(" "))if(e){let r=[],i=2,n=e;for(let t=0;;){if("..."==n&&t>0&&t+3==e.length){i=1;break}let a=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(n);if(!a)throw new RangeError("Invalid path: "+e);if(r.push("*"==a[0]?"":'"'==a[0][0]?JSON.parse(a[0]):a[0]),t+=a[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){i=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);n=e.slice(t)}let o=r.length-1,s=r[o];if(!s)throw new RangeError("Invalid path: "+e);let l=new g(a,i,o>0?r.slice(0,o):null);t[s]=l.sort(t[s])}}return c.add(t)},e.tagHighlighter=d,e.tags=z,e}({});
